@urban_bp.route("/api/ask", methods=["POST"])
def ask():
    """
    Handle a POST request to the /api/ask endpoint.
    This endpoint processes a question sent in the request body and returns a response
    generated by the UrbanAgent.
    """
    try:
        # Get the question from the request JSON
        data = request.json
        question = data.get("question")  # Get the 'question' from the request

        if not question or len(question.strip()) == 0:
            return jsonify({"error": "Question cannot be empty"}), 400  # HTTP 400 Bad Request

        # Use the UrbanAgent to process the question
        response = agent.run(question)

        # Return the response in JSON format
        return jsonify({"response": response}), 200  # HTTP 200 OK

    except Exception as e:
        # Log the exception and return a 500 Internal Server Error response
        print(f"Error: {e}")
        return jsonify({"error": "An unexpected error occurred"}), 500  # HTTP 500 Internal Server Error



